{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/PersonService.js","components/Notification.js","App.js","index.js"],"names":["Filter","onChange","PersonForm","onSubmit","name","number","onNameChange","onNumberChange","value","type","Person","onClick","Persons","persons","map","person","key","id","baseUrl","axios","get","then","res","data","newObject","post","console","log","put","delete","Notification","message","error","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setNewFilter","setMessage","setError","useEffect","personService","initialPersons","personsToShow","toLowerCase","includes","event","target","preventDefault","newPerson","personToAdd","find","window","confirm","returnedPerson","p","setTimeout","catch","concat","response","_id","String","personToRemove","newPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9f5edc3c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ onChange }) => (\r\n    <p>filter names <input onChange={onChange} /></p>\r\n)\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ onSubmit, name, number, onNameChange, onNumberChange }) => (\r\n    <form onSubmit={onSubmit}>\r\n        <table>\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        name:\r\n                    </td>\r\n                    <td>\r\n                        <input value={name} onChange={onNameChange} />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        number:\r\n                </td>\r\n                    <td>\r\n                        <input value={number} onChange={onNumberChange} />\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ persons, onClick }) => (\r\n    <>\r\n        {persons.map(person => {\r\n            return <Person key={person.id} name={person.name} number={person.number} onClick={() => onClick(person.id)}/>\r\n        })}\r\n    </>\r\n)\r\n\r\nconst Person = ({ name, number, onClick}) => (\r\n    <p>{name} {number} <button onClick={onClick}>delete</button></p>\r\n)\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(baseUrl)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const req = axios.post(baseUrl, newObject)\r\n\r\n    return req.then(res => {\r\n        console.log(res.data)\r\n        return res.data\r\n    })\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const req = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst remove = (id => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(() => 'deleted')\r\n})\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    remove: remove\r\n}","import React from 'react'\r\n\r\nconst Notification = ({ message, error }) => {\r\n    if (message === null) return null\r\n    if (error) return <div className=\"error\">{message}</div>\r\n    else return <div className=\"update\">{message}</div> \r\n}\r\n\r\nexport default Notification","import React, { useEffect, useState } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personService from './components/PersonService'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filter, setNewFilter] = useState('')\r\n    const [message, setMessage] = useState(null)\r\n    const [error, setError] = useState(false)\r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(initialPersons =>\r\n                setPersons(initialPersons)\r\n            )\r\n    }, [])\r\n\r\n    const personsToShow = persons.filter(person =>\r\n        person.name.toLowerCase().includes(filter.toLowerCase()))\r\n    const handleNameChange = (event) =>\r\n        setNewName(event.target.value)\r\n    const handleNumberChange = (event) =>\r\n        setNewNumber(event.target.value)\r\n    const handleFilter = (event) =>\r\n        setNewFilter(event.target.value)\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n        const newPerson = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n        const personToAdd = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\r\n        if (personToAdd) {\r\n            if (window.confirm(`${newName} is already in the phonebook! Do you want to update the phone number?`)) {\r\n                personService.update(personToAdd.id, newPerson).then((returnedPerson) => (\r\n                    setPersons(persons.map(p => p.id !== personToAdd.id ? p : returnedPerson))\r\n                ))\r\n                    .then(() => {\r\n                        setError(false)\r\n                        setMessage(`Updated ${personToAdd.name}'s number!`)\r\n                        setTimeout(() => {\r\n                            setMessage(null)\r\n                        }, 5000)\r\n                    })\r\n                    .catch(error => {\r\n                        setError(true)\r\n                        setMessage(`${personToAdd.name} was already removed from server!`)\r\n                        setTimeout(() => {\r\n                            setMessage(null)\r\n                        }, 5000)\r\n                        setPersons(persons.filter(p => p.id !== personToAdd.id))\r\n                    })\r\n\r\n            }\r\n        } else {\r\n            personService.create(newPerson)\r\n                .then(newPerson => setPersons(persons.concat(newPerson)))\r\n                .catch(error => {\r\n                    console.log(error.response.data)\r\n                    setError(true)\r\n                    setMessage(error.response.data.error)\r\n                    setTimeout(() => {\r\n                        setMessage(null)\r\n                    }, 5000)\r\n                })\r\n            setError(false)\r\n            setMessage(`Added ${newPerson.name} to the phonebook!`)\r\n            setTimeout(() => {\r\n                setMessage(null)\r\n            }, 5000)\r\n        }\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n\r\n    const removePerson = (_id) => {\r\n        const id = String(_id)\r\n        const personToRemove = persons.find(p => p.id === id)\r\n        if (window.confirm(`Delete ${personToRemove.name}?`)) {\r\n            personService.remove(id)\r\n                .then((res) => {\r\n                    const newPersons = persons.filter(p => id !== p.id)\r\n                    setError(false)\r\n                    setPersons(newPersons)\r\n                    setMessage(`Removed ${personToRemove.name} from the phonebook!`)\r\n                    setTimeout(() => {\r\n                        setMessage(null)\r\n                    }, 5000)\r\n                })\r\n                .catch(error => {\r\n                    setError(true)\r\n                    setMessage(`${personToRemove.name} is already deleted from the phonebook!`)\r\n                    setTimeout(() => {\r\n                        setMessage(null)\r\n                        setError(false)\r\n                    }, 5000)\r\n                    setPersons(persons.filter(p => id !== p.id))\r\n                })\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Filter onChange={handleFilter} />\r\n            <Notification message={message} error={error} />\r\n            <h2>add new person</h2>\r\n            <PersonForm onSubmit={addPerson} name={newName} number={newNumber} onNameChange={handleNameChange} onNumberChange={handleNumberChange} />\r\n            <h2>Numbers</h2>\r\n            <Persons persons={personsToShow} onClick={removePerson} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}